--- ../src-base/minecraft/net/minecraft/entity/EntityLiving.java
+++ ../src-work/minecraft/net/minecraft/entity/EntityLiving.java
@@ -1414,4 +1414,23 @@
         IN_AIR,
         IN_WATER;
     }
+
+    // Added optimized despawn mobs causing netlag by Luflosi CARPET-XCOM
+	public boolean willImmediatelyDespawn() {
+		if (!this.func_70692_ba() || this.field_82179_bU) {
+			return false;
+		}
+		boolean playerInDimension = false;
+		for (int i = 0; i < this.field_70170_p.field_73010_i.size(); i++) {
+			EntityPlayer entityplayer = this.field_70170_p.field_73010_i.get(i);
+			if (!entityplayer.func_175149_v()) {
+				playerInDimension = true;
+				double distanceSq = entityplayer.func_70092_e(this.field_70165_t, this.field_70163_u, this.field_70161_v);
+				if (distanceSq <= 16384.0D) {
+					return false;
+				}
+			}
+		}
+		return playerInDimension;
+	}
 }
